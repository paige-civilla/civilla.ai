// AppNavbar.tsx
// Replace your current dropdown panel JSX with THIS wide "top bar" style panel.
// This assumes you already have:
// - isMenuOpen / setIsMenuOpen state
// - menuItems array like [{ label, href, icon }]
// - navigate() or setLocation() routing helper
// - apiRequest, queryClient, LogOut icon imported

{isMenuOpen && (
  <div className="absolute left-0 right-0 top-full mt-2 z-[9999]">
    <div className="mx-auto max-w-6xl px-3">
      <div
        className="bg-popover border border-popover-border rounded-xl shadow-xl p-4"
        role="menu"
        aria-label="App menu"
      >
        {/* Header row (email) */}
        <div className="font-sans text-sm text-neutral-darkest/70 mb-3">
          {user?.email}
        </div>

        {/* Horizontal grid of menu buttons */}
        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2">
          {menuItems.map((item) => (
            <button
              key={item.href}
              type="button"
              onClick={() => {
                setIsMenuOpen(false);
                navigate(item.href);
              }}
              className="flex items-center gap-2 rounded-lg px-3 py-2 text-left font-sans text-sm text-neutral-darkest
                         hover:bg-neutral-100 border border-transparent hover:border-neutral-200"
              role="menuitem"
            >
              <item.icon className="h-5 w-5" />
              <span className="truncate">{item.label}</span>
            </button>
          ))}
        </div>

        {/* Footer row with logout */}
        <div className="mt-4 pt-3 border-t border-popover-border flex items-center justify-between">
          <button
            type="button"
            onClick={async () => {
              setIsMenuOpen(false);
              await apiRequest("POST", "/api/auth/logout");
              queryClient.invalidateQueries({ queryKey: ["/api/auth/me"] });
              navigate("/");
            }}
            className="flex items-center gap-2 rounded-lg px-3 py-2 font-sans text-sm text-neutral-darkest
                       hover:bg-neutral-100 border border-transparent hover:border-neutral-200"
          >
            <LogOut className="h-5 w-5" />
            <span>Log out</span>
          </button>

          <button
            type="button"
            onClick={() => setIsMenuOpen(false)}
            className="rounded-lg px-3 py-2 font-sans text-sm text-neutral-darkest/70 hover:bg-neutral-100"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
)}