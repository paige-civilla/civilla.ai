// client/src/components/StepsSection.tsx
import React from "react";

type Step = {
  key: string;
  title: React.ReactNode;
  body: React.ReactNode;
  imageSrc?: string;
  imageAlt?: string;
};

function StepCard({
  title,
  body,
  imageSrc,
  imageAlt,
  variant = "standard",
}: Step & { variant?: "standard" | "wideTop" }) {
  const hasImage = Boolean(imageSrc);

  return (
    <div className="rounded-[24px] border-2 border-black bg-[#f6f4ef] overflow-hidden min-w-0">
      <div
        className={[
          // wideTop: text left + image right (desktop), stacked on mobile
          variant === "wideTop"
            ? "grid grid-cols-1 md:grid-cols-[1fr_360px]"
            : "grid grid-cols-1",
        ].join(" ")}
      >
        {/* TEXT */}
        <div className="p-8 min-w-0">
          <div className="text-4xl md:text-5xl font-black leading-[1.02] tracking-tight min-w-0">
            {title}
          </div>

          <div className="mt-5 text-base md:text-lg leading-relaxed text-neutral-800 min-w-0">
            {body}
          </div>
        </div>

        {/* IMAGE */}
        {hasImage ? (
          <div className="min-w-0">
            <img
              src={imageSrc}
              alt={imageAlt ?? ""}
              className={[
                "block w-full object-cover",
                // keep the right side looking like a “panel” on the wide top card
                variant === "wideTop" ? "h-full md:min-h-[260px]" : "h-auto",
              ].join(" ")}
            />
          </div>
        ) : null}
      </div>
    </div>
  );
}

export default function StepsSection() {
  const step1: Step = {
    key: "step-1",
    title: <>Understand your case type and timeline</>,
    body: (
      <>
        Choose your state and case type to view plain-language education and the
        common stages people often see.
      </>
    ),
    imageSrc: "/images/steps/step-1.jpg",
    imageAlt: "Compass on a map",
  };

  const step2to4: Step[] = [
    {
      key: "step-2",
      title: <>Gather and organize your information</>,
      body: (
        <>
          Add documents, messages, and key events.{" "}
          <em className="cv-brand">civilla</em> organizes what you provide into a
          clear, reviewable timeline.
        </>
      ),
      imageSrc: "/images/steps/step-2.jpg",
      imageAlt: "Desk with laptop and pencils",
    },
    {
      key: "step-3",
      title: <>Learn what’s typical (not what to do)</>,
      body: (
        <>
          Review statutes, court rules, and educational resources — without
          advice, predictions, or filing instructions.
        </>
      ),
    },
    {
      key: "step-4",
      title: <>Prepare with knowledge and clarity</>,
      body: (
        <>
          Turn information into structure: a calmer record, clearer questions,
          and better next steps for you to decide.
        </>
      ),
    },
  ];

  return (
    <section className="px-6 md:px-10">
      <div className="mx-auto max-w-6xl">
        {/* TOP: full width */}
        <StepCard {...step1} variant="wideTop" />

        {/* BOTTOM: 3 across (desktop), stacked on mobile */}
        <div className="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
          {step2to4.map((s) => (
            <StepCard key={s.key} {...s} />
          ))}
        </div>
      </div>
    </section>
  );
}