@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   GLOBAL TEXT CONTAINMENT & RESPONSIVE RULES
   Prevents text from escaping containers on ALL pages
   ========================================= */

/* Ensure all elements calculate width correctly */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent horizontal overflow at the page level */
html,
body {
  max-width: 100%;
  overflow-x: hidden;
}

/* Core text wrapping rules - allow wrapping but not mid-word */
p,
h1,
h2,
h3,
h4,
h5,
h6,
span,
li,
a,
div {
  word-wrap: normal;
  overflow-wrap: normal;
  white-space: normal;
  hyphens: none;
}

/* Ensure containers never allow overflow */
section,
article,
main,
aside,
header,
footer,
div {
  max-width: 100%;
}

/* Card / box safety (applies to all content boxes) */
.cv-card,
.card,
[class*="card"],
[class*="box"],
[class*="container"] {
  max-width: 100%;
  overflow: hidden;
}

/* Text inside cards must wrap - but no mid-word splits */
.cv-card *,
.card *,
[class*="card"] *,
[class*="box"] * {
  min-width: 0;
  word-break: normal;
  hyphens: none;
}

/* Flex & grid children must allow shrinking */
.flex > *,
.grid > * {
  min-width: 0;
}

/* =========================================
   CIVILLA BRAND STYLING
   Applies to all "civilla", "civilla.ai", "www.civilla.ai" mentions
   ========================================= */
.civilla-brand {
  display: inline;
  margin: 0;
  padding: 0;
  text-transform: lowercase;
  font-weight: 500;
  font-style: italic;
  letter-spacing: inherit;
  word-spacing: inherit;
  white-space: inherit;
}

.cv-brand {
  font-style: italic;
  font-weight: 600;
  text-transform: lowercase;
  display: inline;
  white-space: nowrap;
  letter-spacing: normal;
  word-spacing: normal;
  font-kerning: normal;
  font-feature-settings: "kern" 1;
  margin: 0;
  padding: 0;
}

/* =========================================
   CV-SPLIT: Responsive text + media layouts
   ========================================= */
.cv-split {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}
@media (min-width: 768px) {
  .cv-split {
    flex-direction: row;
    align-items: stretch;
  }
}

.cv-split > * {
  min-width: 0;
}

.cv-split-text {
  flex: 1 1 0%;
  min-width: 0;
  overflow: hidden;
}

.cv-split-media {
  flex: 1 1 0%;
  min-width: 0;
  overflow: hidden;
  border-radius: 1.25rem;
}

.cv-split-media img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}

.cv-isolate {
  isolation: isolate;
}

/* Images and media never exceed containers */
img,
svg,
video,
canvas {
  max-width: 100%;
  height: auto;
  display: block;
}

/* =========================================
   RESPONSIVE TEXT SIZING & WRAPPING
   Prevents awkward word breaks across all pages
   ========================================= */

/* Headings: balanced text distribution for cleaner line breaks */
h1, h2, h3, h4, h5, h6,
.cv-h {
  text-wrap: balance;
  hyphens: none;
}

/* Paragraphs: prevent orphans and widows */
p,
.cv-p,
.cv-panel-body {
  text-wrap: pretty;
  hyphens: none;
}

/* Responsive font sizing using clamp() - scales between min and max based on viewport */
/* Large headings (84px designs) */
.text-\[84px\] {
  font-size: clamp(48px, 6vw, 84px) !important;
}

/* Medium-large headings (60px designs) */
.text-\[60px\] {
  font-size: clamp(36px, 4.5vw, 60px) !important;
}

/* Medium headings (32px designs) */
.text-\[32px\] {
  font-size: clamp(24px, 2.5vw, 32px) !important;
}

/* Subheadings (26px designs) */
.text-\[26px\] {
  font-size: clamp(20px, 2vw, 26px) !important;
}

/* Body text (20px designs) */
.text-\[20px\] {
  font-size: clamp(16px, 1.5vw, 20px) !important;
}

/* Standard text (18px designs) */
.text-\[18px\] {
  font-size: clamp(15px, 1.4vw, 18px) !important;
}

/* Prevent single letters from wrapping to new line */
.no-orphan {
  text-wrap: balance;
}

/* Pricing display - keep price and period together */
.pricing-display {
  white-space: nowrap;
  display: inline-flex;
  align-items: baseline;
  flex-wrap: nowrap;
}

/* Responsive pricing text that scales with container - sized for 4-column card layout */
.price-value {
  font-size: clamp(28px, 3vw, 48px);
  white-space: nowrap;
  line-height: 1.1;
}

.price-period {
  font-size: clamp(14px, 1.5vw, 24px);
  white-space: nowrap;
}

/* Pricing card layout - ensure buttons align */
.pricing-card {
  display: flex;
  flex-direction: column;
}

.pricing-card-header {
  flex: 0 0 auto;
}

.pricing-card-price {
  flex: 0 0 auto;
}

.pricing-card-features {
  flex: 1 1 auto;
}

:root {
  --button-outline: rgba(0,0,0, .10);
  --badge-outline: rgba(0,0,0, .05);
  --opaque-button-border-intensity: -8;
  --elevate-1: rgba(0,0,0, .03);
  --elevate-2: rgba(0,0,0, .08);
  --background: 40 28% 98%;
  --foreground: 20 17% 3%;
  --border: 20 17% 88%;
  --card: 40 28% 98%;
  --card-foreground: 20 17% 3%;
  --card-border: 20 17% 88%;
  --sidebar: 40 28% 94%;
  --sidebar-foreground: 158 78% 8%;
  --sidebar-border: 40 28% 90%;
  --sidebar-primary: 158 52% 15%;
  --sidebar-primary-foreground: 40 28% 98%;
  --sidebar-accent: 40 28% 90%;
  --sidebar-accent-foreground: 158 78% 12%;
  --sidebar-ring: 158 52% 15%;
  --popover: 40 28% 92%;
  --popover-foreground: 20 17% 3%;
  --popover-border: 40 28% 88%;
  --primary: 158 52% 15%;
  --primary-foreground: 40 28% 98%;
  --secondary: 0 0% 95%;
  --secondary-foreground: 20 17% 3%;
  --muted: 158 10% 83%;
  --muted-foreground: 20 10% 35%;
  --accent: 158 10% 83%;
  --accent-foreground: 20 17% 3%;
  --destructive: 0 72% 28%;
  --destructive-foreground: 0 72% 98%;
  --input: 20 17% 3%;
  --ring: 158 52% 15%;
  --chart-1: 158 78% 20%;
  --chart-2: 40 65% 30%;
  --chart-3: 158 50% 25%;
  --chart-4: 40 45% 35%;
  --chart-5: 158 40% 30%;
  --font-sans: Arimo, sans-serif;
  --font-heading: Figtree, sans-serif;
  --radius: .75rem;
  --shadow-2xs: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);
  --shadow-sm: 0px 1px 2px 0px rgba(7, 5, 3, 0.05);
  --shadow: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 1px 2px -1px hsl(158 78% 15% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 2px 4px -1px hsl(158 78% 15% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 4px 6px -1px hsl(158 78% 15% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 8px 10px -1px hsl(158 78% 15% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;

  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

.dark {
  --button-outline: rgba(255,255,255, .10);
  --badge-outline: rgba(255,255,255, .05);
  --opaque-button-border-intensity: 9;
  --elevate-1: rgba(255,255,255, .04);
  --elevate-2: rgba(255,255,255, .09);
  --background: 158 45% 8%;
  --foreground: 40 28% 96%;
  --border: 158 45% 14%;
  --card: 158 45% 10%;
  --card-foreground: 40 28% 96%;
  --card-border: 158 45% 12%;
  --sidebar: 158 45% 12%;
  --sidebar-foreground: 40 28% 96%;
  --sidebar-border: 158 45% 14%;
  --sidebar-primary: 158 52% 15%;
  --sidebar-primary-foreground: 40 28% 98%;
  --sidebar-accent: 158 45% 16%;
  --sidebar-accent-foreground: 40 28% 94%;
  --sidebar-ring: 158 52% 15%;
  --popover: 158 45% 14%;
  --popover-foreground: 40 28% 96%;
  --popover-border: 158 45% 16%;
  --primary: 158 52% 15%;
  --primary-foreground: 40 28% 98%;
  --secondary: 158 45% 18%;
  --secondary-foreground: 40 28% 94%;
  --muted: 158 45% 20%;
  --muted-foreground: 40 28% 70%;
  --accent: 158 30% 22%;
  --accent-foreground: 40 28% 92%;
  --destructive: 0 72% 28%;
  --destructive-foreground: 0 72% 98%;
  --input: 40 28% 92%;
  --ring: 158 52% 15%;
  --chart-1: 158 65% 75%;
  --chart-2: 40 55% 70%;
  --chart-3: 158 50% 65%;
  --chart-4: 40 45% 60%;
  --chart-5: 158 40% 55%;
  --shadow-2xs: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 1px 2px -1px hsl(158 78% 15% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 1px 2px -1px hsl(158 78% 15% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 2px 4px -1px hsl(158 78% 15% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 4px 6px -1px hsl(158 78% 15% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(158 78% 15% / 0.00), 0px 8px 10px -1px hsl(158 78% 15% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(158 78% 15% / 0.00);

  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-cream text-neutral-darkest;
  }
}

@layer components {
  .cv-card {
    @apply rounded-2xl border-2 border-white/70 bg-[#0f3b2e];
  }

  .cv-grid-2 {
    @apply grid grid-cols-1 md:grid-cols-[320px_1fr] gap-6 items-stretch;
  }

  .cv-panel {
    @apply rounded-xl border-2 border-white/70 p-6 md:p-8 flex flex-col min-h-0;
  }

  .cv-panel-body {
    @apply min-h-0 leading-relaxed overflow-auto;
  }

  .cv-h {
    @apply font-bold leading-tight;
  }

  .cv-p {
    @apply leading-relaxed;
  }
}

@layer utilities {
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  .no-default-hover-elevate {}
  .no-default-active-elevate {}

  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: -1;
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  .border.toggle-elevate::before {
    inset: -1px;
  }

  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: 999;
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }

  .button-inset-shadow {
    box-shadow: inset 0px 32px 24px 0px rgba(255,255,255,0.05),
                inset 0px 2px 1px 0px rgba(255,255,255,0.25),
                inset 0px 0px 0px 1px rgba(7,5,3,0.15),
                inset 0px -2px 1px 0px rgba(0,0,0,0.2);
  }
}

/* =========================================
   GLOBAL NO-HYPHEN RULES (MUST BE AT BOTTOM TO WIN)
   Prevents mid-word splits like "orga-nized"
   ========================================= */

html, body {
  -webkit-hyphens: none;
  hyphens: none;
  word-break: normal;
  overflow-wrap: normal;
}

/* Safety net for common text elements */
h1, h2, h3, h4, h5, h6,
p, li, span, a, button, label, small, strong, em,
blockquote, dd, dt, figcaption {
  -webkit-hyphens: none;
  hyphens: none;
  word-break: normal;
  overflow-wrap: normal;
}

/* If Tailwind Typography (.prose) is used anywhere */
.prose, .prose * {
  -webkit-hyphens: none;
  hyphens: none;
  word-break: normal;
  overflow-wrap: normal;
}

/* Safe text container utility for flex/grid children */
.safe-text-container {
  min-width: 0;
  overflow: hidden;
}
